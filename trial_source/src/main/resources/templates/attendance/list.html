<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/common/layout :: layout(~{::title},~{::body/content()})}">

<head>
	<meta charset="UTF-8">
	<title>勤怠情報確認｜LMS</title>
</head>

<body>
	<th:block th:if="${session.loginUserDto.role == '0002'}">
		<h2>勤怠情報確認 <small>(受講生一覧)</small></h2>
	</th:block>
	<form th:action="@{/attendance/list}" method="post" class="form-horizontal">
		<div class="well bs-component">
			<legend>検索</legend>
			<fieldset>
				<div class="form-group">
					<label for="courseId" class="col-lg-2 control-label">コース名</label>
					<div class="col-lg-10">
						<select name="courseId" class="form-control">
							<option value=""></option>
							<option th:each="course : ${courses}" th:value="${course.courseId}"
								th:text="${course.courseName}"
								th:selected="${course.courseId == attendanceCheckForm.courseId}"></option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label for="placeId" class="col-lg-2 control-label">会場名</label>
					<div class="col-lg-10">
						<select name="placeId" class="form-control" id="place" style="pointer-events: none;" readonly>
							<option th:each="place : ${places}" th:value="${place.placeId}"
								th:text="${place.placeName} + '(' + ${place.placeNote} + ')'"
								th:selected="${place.placeId == session.loginUserDto.placeId}"></option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label for="companyId" class="col-lg-2 control-label">企業名</label>
					<div class="col-lg-10">
						<select name="companyId" class="form-control">
							<option value=""></option>
							<option th:each="company : ${companies}" th:value="${company.companyId}"
								th:text="${company.companyName}"
								th:selected="${company.companyId == attendanceCheckForm.companyId}"></option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label for="userName" class="col-lg-2 control-label">ユーザー名</label>
					<div class="col-lg-10">
						<input type="text" name="userName" class="form-control" th:value="${attendanceCheckForm.userName}"/>
					</div>
				</div>
				<div class="form-group">
					<div class="col-lg-10 col-lg-offset-2">
						<input type="submit" class="btn btn-primary" value="検索" />
					</div>
				</div>
			</fieldset>
		</div>
		</div>
	</form>
	<table class="table table-hover tablesorter" id="file-table">
		<thead>
			<tr>
				<th>ユーザーID</th>
				<th>ユーザー名</th>
				<th>コース名</th>
				<th>企業名</th>
				<th>会場</th>
				<th>編集</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="check : ${checkList}">
				<td th:text="${check.userId}"></td>
				<td th:text="${check.userName}"></td>
				<td th:text="${check.courseName}"></td>
				<td th:text="${check.companyName}"></td>
				<td th:text="${check.placeName}"></td>
				<td>
					<form th:action="@{/attendance/updateAdmin}" method="post">
						<input type="submit" value="勤怠情報変更" class="btn btn-default" />
					</form>
				</td>
			</tr>
		</tbody>
	</table>

	<script th:src="@{/js/attendanceCheck.js}"></script>
</body>

</html>